#!/bin/bash

{{- if ne .chezmoi.os "darwin" }}
exit 0
{{- end }}

if ! command -v brew &> /dev/null; then
  echo "Brew is not installed. Installing now..."
  NONINTERACTIVE=1 /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
else
  echo "Brew is already installed. Skipping installation."
fi

# Brewfile hash: {{ include "dot_Brewfile" . | sha256sum }}

brew bundle install --no-lock --cleanup --no-upgrade --global
brew cleanup --prune=all
